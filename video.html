<!DOCTYPE html>
<meta charset="utf-8">

<body>
	<div>
		<video autoplay style="border:1px solid blue;"></video>
	</div>
	<div>
		<button onclick="snapshot()">Take Picture</button>
	</div>
	<div>
		<canvas width="640" height="400" style="border:1px solid red;"></canvas><br>
	</div>

<script>
	var video = document.querySelector('video');
	var localMediaStream = null;

	navigator.getUserMedia = navigator.getUserMedia || 
	                         navigator.webkitGetUserMedia || 
	                         navigator.mozGetUserMedia || 
	                         navigator.msGetUserMedia;

	navigator.getUserMedia({video:true}, onMediaStream, onMediaFail);

	function onMediaStream(stream) {
		window.URL = window.URL || window.webkitURL;
		video.src = window.URL.createObjectURL(stream);
		console.log(video.width + ' - ' + video.height);
		localMediaStream = stream;
	}

	function onMediaFail(e) {
		console.log('Camera did not work.', e);
	}

	function snapshot() {
		if (localMediaStream) {
			var canvas = document.querySelector('canvas');
			var ctx = canvas.getContext('2d');
			ctx.drawImage(video, 0, 0);
		}
	}
</script>
